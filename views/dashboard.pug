extends layout.pug

block content
  h1 Welcome, #{user.display_name}.

  form(action="/search", method="get", class = "search-bar")
    input(type="text", name="query", placeholder="Search for a song...")
    input(type="submit", value="Search")


  a(href="/playlists", class = "oval-link") My Playlists

  h2 Liked Songs (50)

  table 
    each t in tracks
      tr 
        - var artist_name = t.track.artists[0].name
        - var track_name = t.track.name
        - var track_preview = t.track.preview_url
        - var artist_id = t.track.artists[0].id
        - var track_id = t.track.id 

        td #{artist_name}
        td: a(href='/recommendations?artist=' + artist_id+'&track='+track_id+'&name='+track_name) #{track_name}
        td: a(href=track_preview) Preview
